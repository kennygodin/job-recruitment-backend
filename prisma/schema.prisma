generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                Int            @id @default(autoincrement())
  userId            String @unique @default(uuid())
  name              String
  email             String         @unique
  password          String
  role              Role
  image             String?
  isVerified        Boolean        @default(false)
  status            String         @default("active")
  resume            String?
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  applications      Application[]
  company           Company?
}

model Company {
  id                Int    @id @default(autoincrement())
  companyId        String @unique @default(uuid())
  companyName       String
  companyWebsite    String
  companyAddress    String
  logo              String?
  industry          String
  numberOfEmployees    String?
  whereDidYouHear   String?
  notificationEmail String?
  cacDocument       String
  jobs              Job[]
  socials           Social[]
  country           String
  phone             String
  userId            String @unique
  companyStatus    CompanyStatus        
  user              User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model Job {
  id              Int           @id @default(autoincrement())
  jobId           String            @unique @default(uuid())
  title           String
  description     String
  companyId       String
  location        String
  jobType         JobType
  jobStatus       JobStatus
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  industry        String?
  jobRequirements String?
  jobSummary      String?
  experience      String?
  salary          String?
  applicants      Application[]
  company        Company          @relation(fields: [companyId], references: [companyId], onDelete: Cascade)
}

model Application {
  id                Int               @id @default(autoincrement())
  applicationId     String            @unique @default(uuid())
  jobId             String
  resume            String?
  coverLetter       String?
  status            ApplicationStatus
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  userId       String
  yearsOfExperience String
  user              User              @relation(fields: [userId], references: [userId], onDelete: Cascade)
  job               Job               @relation(fields: [jobId], references: [jobId], onDelete: Cascade)
}

model Social {
  id        Int      @id @default(autoincrement())
  socialId     String            @unique @default(uuid())
  companyId    String
  createdAt DateTime @default(now())
  expiresAt DateTime
  company      Company     @relation(fields: [socialId], references: [companyId], onDelete: Cascade)
}

model VerificationToken {
  id              String @id @default(cuid())
  email             String         @unique
  token           String           @unique
  expires         DateTime
}

model RefreshToken {
  id              String @id @default(cuid())
  email             String         @unique
  token           String           @unique
  expires         DateTime
}

model ResetToken {
  id              String @id @default(cuid())
  email             String         @unique
  token           String           @unique
  expires         DateTime
}

enum Role {
  ADMIN
  USER
}

enum JobType {
  FULL_TIME
  PART_TIME
  CONTRACT
}

enum JobStatus {
  OPEN
  CLOSED
}

enum CompanyStatus {
  PENDING
  ACCEPTED
  REJECTED
}

enum ApplicationStatus {
  PENDING
  ACCEPTED
  REJECTED
}
